@using Shared.Models
@inherits WorldExplorerAuthBaseComponent
@page "/admin"
@attribute [Authorize(Policy = "IsAdministrator")]
@attribute [StreamRendering()]

<AuthorizeView Policy="IsAdministrator">
	<Authorized>
		<MudTabs Elevation="2" Rounded="true" ApplyEffectsToContainer="true" PanelClass="pa-6">
            <MudTabPanel Text="Places">
                <MudButton OnClick="ClearPlaces">Clear places</MudButton>

                <MudTable Items="@places" Breakpoint="Breakpoint.Sm" T="Place">
                	<HeaderContent>
                		<MudTh>Name</MudTh>
                		<MudTh>Location</MudTh>
                		<MudTh>Rating</MudTh>
                		<MudTh>Images count</MudTh>
                	</HeaderContent>
                	<RowTemplate Context="place">
                		<MudTd DataLabel="Name">@place.Name</MudTd>
                		<MudTd DataLabel="Location">@place.Location</MudTd>
                		<MudTd DataLabel="Rating">@place.Rating</MudTd>
                		<MudTd DataLabel="Images count">@place.Images.Count</MudTd>
                	</RowTemplate>
                </MudTable>
            </MudTabPanel>
            <MudTabPanel Text="Users">
                <MudTable Items="@users" Breakpoint="Breakpoint.Sm" T="User">
                	<HeaderContent>
                		<MudTh>Id</MudTh>
                		<MudTh>Name</MudTh>
                		<MudTh>Email</MudTh>
                	</HeaderContent>
                	<RowTemplate Context="user">
                		<MudTd DataLabel="Id">@user.Id</MudTd>
                		<MudTd DataLabel="Name">@user.Name</MudTd>
                		<MudTd DataLabel="Email">@user.Email</MudTd>
                	</RowTemplate>
                </MudTable>
            </MudTabPanel>
        </MudTabs>
	</Authorized>
</AuthorizeView>