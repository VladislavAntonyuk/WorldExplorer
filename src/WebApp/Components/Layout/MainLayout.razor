@inherits WorldExplorerBaseLayout

<MudRTLProvider RightToLeft="@rightToLeft">
	<MudThemeProvider @ref="@mudThemeProvider" @bind-IsDarkMode="@isDarkMode"/>
	<MudPopoverProvider />
	<MudDialogProvider CloseButton="true"
	                   CloseOnEscapeKey="true"
	                   BackdropClick="false"
	                   Position="DialogPosition.Center"/>
	<MudSnackbarProvider/>

	<MudLayout>
		<MudAppBar Elevation="1">
			<MudHidden Breakpoint="Breakpoint.SmAndDown">
				<MudLink Href="/">
					<img src="favicon.ico" alt="@Constants.ProductName" class="mud-icon-root mud-icon-size-large"/>
				</MudLink>
			</MudHidden>
			<MudHidden Breakpoint="Breakpoint.MdAndUp">
				<MudIconButton Icon="@Icons.Material.Outlined.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="DrawerToggle"/>
			</MudHidden>
			<MudHidden Breakpoint="Breakpoint.Xs">
				<MudLink Href="/" Typo="Typo.h6" Class="ml-4" Color="Color.Inherit">@Constants.ProductName</MudLink>
			</MudHidden>
			<MudHidden Breakpoint="Breakpoint.Xs" Invert="true">
				<MudLink Href="/" Typo="Typo.subtitle2" Color="Color.Inherit">@Constants.ProductName</MudLink>
			</MudHidden>
			<MudSpacer/>
			<AuthorizeView>
				<Authorized>
					<MudHidden Breakpoint="Breakpoint.MdAndUp" Invert="true">
						<SearchControl/>
					</MudHidden>
				</Authorized>
			</AuthorizeView>
			<MudToggleIconButton @bind-Toggled="rightToLeft"
			                     Icon="@Icons.Material.Filled.FormatTextdirectionRToL"
			                     ToggledIcon="@Icons.Material.Filled.FormatTextdirectionRToL"
			                     Color="Color.Inherit"
			                     Title="@Translation.RightToLeft"/>
			<AuthorizeView>
				<Authorized>
					<LoginControl/>
				</Authorized>
			</AuthorizeView>
		</MudAppBar>

        <MudDrawer @bind-Open="drawerOpen" Elevation="1" ClipMode="DrawerClipMode.Always">
            <NavMenu />
            <AuthorizeView>
	            <NotAuthorized>
		            <LanguageControl />
	            </NotAuthorized>
	            <Authorized>
		            <MudHidden Breakpoint="Breakpoint.MdAndUp">
			            <SearchControl />
		            </MudHidden>
	            </Authorized>
            </AuthorizeView>
            <MudLink Href="https://www.buymeacoffee.com/vlad.antonyuk" Target="_blank">
	            <MudImage Src="https://cdn.buymeacoffee.com/buttons/v2/default-blue.png"
	                      Alt="Buy Me A Coffee"
	                      Fluid="true"
	                      Class="side-image"/>
            </MudLink>
        </MudDrawer>
		<MudMainContent>
			<MudContainer MaxWidth="MaxWidth.False">
				<ErrorBoundary @ref="errorBoundary" MaximumErrorCount="5">
					<ChildContent>
						@Body
					</ChildContent>
					<ErrorContent>
						<MudText Typo="Typo.h1">Error has occurred</MudText>
						<MudButton OnClick="ResetError">Go To The Homepage</MudButton>
					</ErrorContent>
				</ErrorBoundary>
			</MudContainer>
			<MudScrollToTop Style="z-index: 1200">
				<MudFab StartIcon="@Icons.Material.Filled.ArrowUpward" Color="Color.Primary"/>
			</MudScrollToTop>
		</MudMainContent>
	</MudLayout>
</MudRTLProvider>

<div id="blazor-error-ui">
    An unhandled error has occurred.
    <a href="" class="reload">Reload</a>
    <a class="dismiss">ðŸ—™</a>
</div>